<head>
    <style>
    @page{ 
        size: a4 landscape;
    }
    html {
        margin: 0;
        padding: 0;
        font-family: Arial;
    }

    body {
        margin: 0;
        padding: 0;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 9pt;
    }

    table th,
    table td {
        vertical-align: top;
        padding: 1mm 1mm;
        border: 0.1pt solid #000000;
    }

    table thead th {
        text-align: center;
    }

    table tr.tfoot {
        font-weight: bold;
    }

    td.visitDate {
        width: 8%;
        text-align: center;
    }

    td.patient {
        width: 64%;
    }

    td.phoneNumbers {
        width: 20%;
    }

    td.phoneNumbers span.number + span.number::before {
        content: "- ";
    }

    td.amount {
        width: 8%;
        text-align: right;
    }
    </style>
</head>
<Page>
    <table>
        <thead>
            <tr>
                <th class="visitDate">Date visite</th>
                <th class="patient">Patient</th>
                <th class="phoneNumbers">Téléphone</th>
                <th class="amount">Solde</th>
            </tr>
        </thead>
        <tbody>
            {{#each patientBalances }}
            <tr>
                <td class="visitDate">{{dateShort this.lastCare }}</td>
                <td class="patient">{{ this.patient.firstname }} {{this.patient.lastname}}</td>
                <td class="phoneNumbers">
                    {{#each this.patient.phones }}
                        {{#if (gt @index 0)}} - {{/if}}
                    <span class="number">{{ this.nbr }}</span>
                    {{/each}}
                </td>
                <td class="amount">{{amountCurrency this.amount ../currency}}</td>
            </tr>
            {{/each}}
            {{#if displayFooter}}
                <tr class="tfoot">
                <td colspan="3"></td>
                <td class="amount">{{amountCurrency totalAmount currency}}</td>
            </tr>
            {{/if}}
        </tbody>
    </table>
</Page>
