<style type="text/css">
    @page{
        size: A4;
    }
    * {
        box-sizing: border-box;
    }

    table.pageFooter {
        width: 100%;
        border-collapse: collapse;
    }

    td.memberOfApprovedAssociation {
        width: 70%;
        vertical-align: top;
        font-style: italic;
    }

    td.pageNumber {
        width: 30%;
        text-align: right;
        vertical-align: top;
    }
    
    table.prestations {
        width: 100%;
        border-collapse: collapse;
    }
    
    table.prestations th,
    table.prestations td {
        padding: 5px;
        border-style: solid;
        border-color: #000000;
        border-width: 1px 1px 0;
    }
    
    table.prestations thead th,
    table.prestations tfoot th.col4,
    table.prestations tfoot th.col5 {
        background-color: #DDDDFF;
    }
    
    table.prestations tbody tr.last td,
    table.prestations tfoot th {
        border-bottom-style: solid;
        border-bottom-color: #000000;
        border-bottom-width: 1px;
    }
    
    table.prestations th {
        /*border: solid 1px #000000;*/
        border-bottom: none;
    }
    
    table.prestations td {
        border-bottom: none;
        border-top: none;
    }
    
    table.prestations tbody tr.last td {
        /*border-bottom: solid 1px #000000;*/
    }
    
    table.prestations .col1,
    table.prestations .col2,
    table.prestations .col4,
    table.prestations .col5 {
        width: 13%;
    }
    
    table.prestations .col1,
    table.prestations .col2 {
        text-align: center;
    }
    
    table.prestations .col4,
    table.prestations .col5 {
        text-align: right;
    }
    
    table.prestations .col3 {
        {{#if isGroup}}
          width: 48%;
        {{else}}
          width: 61%;
        {{/if}}
    }

    table.prestations tbody tr.ligneBlanche td {
        height: 5mm;
        padding: 0;
    }

    table.prestations tbody tr.ligneSeparation td {
        height: 2.5mm;
        padding: 0;
    }

    table.prestations tbody tr.ligneSeparationTop td {
        border-bottom: solid 1px #000000;
    }

    .footer {
        display: flex;
        justify-content: space-between;
    }
    .info{
        width: 48%;
        height: 125px;
        border: 2px dotted #000;
        border-radius: 8px;
    }
    .sign{
        width: 48%;
        text-align: right;
    }
</style>
<table style="width: 100%; border-collapse: collapse;">
    <tbody>
        <tr>
            <td style="width: 40%;background-color: #DDDDFF; border-radius: 5px; padding: 10px; vertical-align: top; height: 60px;">
                <div><strong>{{{identPrat}}}</strong></div>
                <div>{{{adressePrat}}}</div>
            </td>
            <td style="width: 10%;"></td>
            <td style="width: 40%; text-align: center; vertical-align: top; font-weight: bold; font-size: 18px;">
                {{{titreFacture}}}
                {{#if duplicata}}
                <br />
                <span style="color: red; text-transform: uppercase;">Duplicata</span>
                {{/if}}
            </td>
            <td style="width: 10%;"></td>
        </tr>
    </tbody>
</table>
<div style="height: 20px;"></div>
<table style="width: 100%;"> 
    <!-- Add the rest of the content here -->
</table>
<table style="width: 100%;">
    <tbody>
        <tr>
            <td style="width: 40%; vertical-align: top;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tbody>
                        <tr>
                            <td style="width: 40%;">Date</td>
                            <td style="width: 60%;"><strong>{{formatDate dateFacture}}</strong></td>
                        </tr>
                        <tr>
                            <td style="width: 40%;">N° Facture</td>
                            <td style="width: 60%;"><strong>{{nbr}}</strong></td>
                        </tr>
                    </tbody>
                </table>
            </td>
            <td style="width: 10%;"></td>
            <td style="width: 40%; background-color: #FFFFFF; border: dashed 1px #000000; border-radius: 5px; vertical-align: top; padding: 10px; height: 100px;">
                {{{nl2br identPat}}}
            </td>
            <td style="width: 10%;"></td>
        </tr>
    </tbody>
</table>
<div style="height: 20px;"></div>
    <table class="prestations">
        <thead>
            <tr>
                <th class="col1">Date</th>
                <th class="col2">Dents</th>
                <th class="col3">Libellé</th>
                {{#unless isGroup}}
                <th class="col4">Remb.</th>
                {{/unless}}
                <th class="col5">Prix</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th colspan="3" style="text-align: right;">Total ( en euros )</th>
                {{#unless isGroup}}
                <th class="col4">
                    {{detailsAmount}}
                </th>
                {{/unless}}
                <th class="col5">
                    {{detailsPrixLigne}}
                </th>
            </tr>
        </tfoot>
        <tbody>
            {{#each details}}
            {{#if (isEqual this.typeLigne 'operation')}}
            <tr class="{{#if (isEqual @index detailsLength)}}last{{/if}}">
                <td class="col1">{{this.dateLigne}}</td>
                <td class="col2">{{formatDentsLigne this.dentsLigne}}</td>
                <td class="col3">{{{br2nl this.descriptionLigne}}}</td>
                {{#unless isGroup}}
                <td class="col4">{{formatNumber this.secuAmount}}</td>
                {{/unless}}
                <td class="col5">{{formatNumber this.prixLigne}}</td>
            </tr>
            {{else if (isEqual typeLigne 'ligneSeparation')}}
            <tr class="ligneSeparation ligneSeparationTop {{#if (isEqual @index detailsLength)}}last-child{{/if}}">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
                {{#unless isGroup}}
                <td class="col4"></td>
                {{/unless}}
                <td class="col5"></td>
            </tr>
            <tr class="ligneSeparation ligneSeparationBottom {{#if (isEqual @index detailsLength)}}last-child{{/if}}">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
                {{#unless isGroup}}
                <td class="col4"></td>
                {{/unless}}
                <td class="col5"></td>
            </tr>
            {{else if (isEqual this.typeLigne 'ligneBlanche')}}
            <tr class="ligneBlanche {{#if (isEqual @index detailsLength)}}last-child{{/if}}">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
                {{#unless isGroup}}
                <td class="col4"></td>
                {{/unless}}
                <td class="col5"></td>
            </tr>
            {{/if}}
            {{/each}}
        </tbody>
    </table>
    <div style="height: 20px;"></div>
    <div class="footer">
        <div class="info">
            {{nl2br infosCompl}}
        </div>
        <div class="sign">
            <p>Payée par <strong style="text-transform: capitalize;">{{modePaiement}}</strong></p>
            <div id="signaturePraticien">
                {{#if billSignatureDoctor}}
                <img src="{{billSignatureDoctor}}" style="max-height: 150px;" />
                {{/if}}
            </div>
        </div>
    </div>
